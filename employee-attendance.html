<!-- Nhân Viên -->
<div id="employee" class="section">
    <h1>Quản Lý Nhân Viên</h1>
    <div class="form-card">
        <form id="employeeForm">
            <div class="form-row">
                <div class="form-group">
                    <label>Mã Nhân Viên *</label>
                    <input type="text" id="empCode" required>
                </div>
                <div class="form-group">
                    <label>Họ Tên *</label>
                    <input type="text" id="empName" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Số Điện Thoại</label>
                    <input type="tel" id="empPhone">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="empEmail">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Chức Vụ *</label>
                    <input type="text" id="empPosition" required>
                </div>
                <div class="form-group">
                    <label>Phòng Ban</label>
                    <input type="text" id="empDepartment">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Lương Cơ Bản *</label>
                    <input type="number" id="empBaseSalary" required>
                </div>
                <div class="form-group">
                    <label>Vùng Lương *</label>
                    <select id="empRegion" required>
                        <option value="region1">Vùng I (4,960,000đ)</option>
                        <option value="region2">Vùng II (4,410,000đ)</option>
                        <option value="region3">Vùng III (3,860,000đ)</option>
                        <option value="region4">Vùng IV (3,450,000đ)</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Số Người Phụ Thuộc</label>
                    <input type="number" id="empDependents" value="0" min="0">
                </div>
                <div class="form-group">
                    <label>Ngày Vào Làm</label>
                    <input type="date" id="empStartDate">
                </div>
            </div>
            <button type="submit" class="btn-primary">Thêm Nhân Viên</button>
        </form>
    </div>

    <div class="data-table">
        <div class="table-header">
            <h2>Danh Sách Nhân Viên</h2>
            <button onclick="exportEmployees()" class="btn-export">Xuất Excel</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Mã NV</th>
                    <th>Họ Tên</th>
                    <th>Chức Vụ</th>
                    <th>Phòng Ban</th>
                    <th>Lương CB</th>
                    <th>Vùng</th>
                    <th>NPT</th>
                    <th>Thao Tác</th>
                </tr>
            </thead>
            <tbody id="employeeList"></tbody>
        </table>
    </div>
</div>

<!-- Chấm Công -->
<div id="attendance" class="section">
    <h1>Chấm Công & Tính Lương</h1>
    
    <div class="form-card">
        <h2>Chấm Công Theo Tháng</h2>
        <form id="attendanceForm">
            <div class="form-row">
                <div class="form-group">
                    <label>Nhân Viên *</label>
                    <select id="attEmployee" required>
                        <option value="">Chọn nhân viên</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tháng *</label>
                    <input type="month" id="attMonth" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Số Ngày Công *</label>
                    <input type="number" id="attWorkDays" step="0.5" min="0" max="31" required>
                </div>
                <div class="form-group">
                    <label>Số Giờ Tăng Ca</label>
                    <input type="number" id="attOvertimeHours" step="0.5" min="0" value="0">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Phụ Cấp</label>
                    <input type="number" id="attAllowance" value="0">
                </div>
                <div class="form-group">
                    <label>Thưởng</label>
                    <input type="number" id="attBonus" value="0">
                </div>
            </div>
            <button type="submit" class="btn-primary">Tính Lương</button>
        </form>
    </div>

    <div class="salary-preview" id="salaryPreview" style="display: none;">
        <h2>Chi Tiết Lương</h2>
        <div class="salary-details">
            <div class="salary-row">
                <span>Lương Cơ Bản:</span>
                <strong id="previewBaseSalary">0 đ</strong>
            </div>
            <div class="salary-row">
                <span>Lương Theo Ngày Công:</span>
                <strong id="previewWorkSalary">0 đ</strong>
            </div>
            <div class="salary-row">
                <span>Lương Tăng Ca:</span>
                <strong id="previewOvertimeSalary">0 đ</strong>
            </div>
            <div class="salary-row">
                <span>Phụ Cấp:</span>
                <strong id="previewAllowance">0 đ</strong>
            </div>
            <div class="salary-row">
                <span>Thưởng:</span>
                <strong id="previewBonus">0 đ</strong>
            </div>
            <div class="salary-row total">
                <span>Tổng Thu Nhập:</span>
                <strong id="previewGrossIncome">0 đ</strong>
            </div>
            <hr>
            <div class="salary-row deduction">
                <span>BHXH (8%):</span>
                <strong id="previewBHXH">0 đ</strong>
            </div>
            <div class="salary-row deduction">
                <span>BHYT (1.5%):</span>
                <strong id="previewBHYT">0 đ</strong>
            </div>
            <div class="salary-row deduction">
                <span>BHTN (1%):</span>
                <strong id="previewBHTN">0 đ</strong>
            </div>
            <div class="salary-row deduction">
                <span>Tổng BH (10.5%):</span>
                <strong id="previewTotalInsurance">0 đ</strong>
            </div>
            <hr>
            <div class="salary-row">
                <span>Thu Nhập Trước Thuế:</span>
                <strong id="previewTaxableIncome">0 đ</strong>
            </div>
            <div class="salary-row">
                <span>Giảm Trừ Bản Thân:</span>
                <strong id="previewSelfDeduction">11,000,000 đ</strong>
            </div>
            <div class="salary-row">
                <span>Giảm Trừ Người PT:</span>
                <strong id="previewDependentDeduction">0 đ</strong>
            </div>
            <div class="salary-row">
                <span>Thu Nhập Tính Thuế:</span>
                <strong id="previewTaxBase">0 đ</strong>
            </div>
            <div class="salary-row deduction">
                <span>Thuế TNCN:</span>
                <strong id="previewTax">0 đ</strong>
            </div>
            <hr>
            <div class="salary-row net">
                <span>LƯƠNG THỰC LĨNH:</span>
                <strong id="previewNetSalary">0 đ</strong>
            </div>
        </div>
        <button onclick="saveAttendance()" class="btn-primary">Lưu Bảng Lương</button>
    </div>

    <div class="data-table">
        <div class="table-header">
            <h2>Bảng Lương Tháng</h2>
            <button onclick="exportSalaries()" class="btn-export">Xuất Excel</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Tháng</th>
                    <th>Nhân Viên</th>
                    <th>Ngày Công</th>
                    <th>Tổng Thu</th>
                    <th>Bảo Hiểm</th>
                    <th>Thuế TNCN</th>
                    <th>Thực Lĩnh</th>
                    <th>Thao Tác</th>
                </tr>
            </thead>
            <tbody id="attendanceList"></tbody>
        </table>
    </div>
</div>

<!-- Hạch Toán -->
<div id="accounting" class="section">
    <h1>Hạch Toán Kế Toán</h1>
    
    <div class="form-card">
        <h2>Tạo Bút Toán</h2>
        <form id="accountingForm">
            <div class="form-row">
                <div class="form-group">
                    <label>Số Chứng Từ *</label>
                    <input type="text" id="accVoucherNo" required>
                </div>
                <div class="form-group">
                    <label>Ngày Chứng Từ *</label>
                    <input type="date" id="accDate" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Tài Khoản Nợ *</label>
                    <select id="accDebit" required>
                        <option value="">Chọn TK Nợ</option>
                        <option value="111">111 - Tiền mặt</option>
                        <option value="112">112 - Tiền gửi ngân hàng</option>
                        <option value="131">131 - Phải thu khách hàng</option>
                        <option value="152">152 - Nguyên vật liệu</option>
                        <option value="331">331 - Phải trả người bán</option>
                        <option value="334">334 - Phải trả người lao động</option>
                        <option value="338">338 - Phải trả khác</option>
                        <option value="511">511 - Doanh thu bán hàng</option>
                        <option value="621">621 - Chi phí NVL</option>
                        <option value="622">622 - Chi phí nhân công</option>
                        <option value="627">627 - Chi phí sản xuất chung</option>
                        <option value="641">641 - Chi phí bán hàng</option>
                        <option value="642">642 - Chi phí quản lý</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tài Khoản Có *</label>
                    <select id="accCredit" required>
                        <option value="">Chọn TK Có</option>
                        <option value="111">111 - Tiền mặt</option>
                        <option value="112">112 - Tiền gửi ngân hàng</option>
                        <option value="131">131 - Phải thu khách hàng</option>
                        <option value="152">152 - Nguyên vật liệu</option>
                        <option value="331">331 - Phải trả người bán</option>
                        <option value="334">334 - Phải trả người lao động</option>
                        <option value="338">338 - Phải trả khác</option>
                        <option value="511">511 - Doanh thu bán hàng</option>
                        <option value="621">621 - Chi phí NVL</option>
                        <option value="622">622 - Chi phí nhân công</option>
                        <option value="627">627 - Chi phí sản xuất chung</option>
                        <option value="641">641 - Chi phí bán hàng</option>
                        <option value="642">642 - Chi phí quản lý</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Số Tiền *</label>
                    <input type="number" id="accAmount" required>
                </div>
                <div class="form-group">
                    <label>Loại Chứng Từ</label>
                    <select id="accType">
                        <option value="manual">Nhập tay</option>
                        <option value="receipt">Phiếu thu</option>
                        <option value="payment">Phiếu chi</option>
                        <option value="invoice">Hóa đơn</option>
                        <option value="salary">Bảng lương</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label>Diễn Giải</label>
                <textarea id="accDescription" rows="3"></textarea>
            </div>
            <button type="submit" class="btn-primary">Ghi Sổ</button>
        </form>
    </div>

    <div class="data-table">
        <div class="table-header">
            <h2>Sổ Nhật Ký Chung</h2>
            <button onclick="exportAccounting()" class="btn-export">Xuất Excel</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Ngày</th>
                    <th>Số CT</th>
                    <th>Diễn Giải</th>
                    <th>TK Nợ</th>
                    <th>TK Có</th>
                    <th>Số Tiền</th>
                    <th>Loại</th>
                    <th>Thao Tác</th>
                </tr>
            </thead>
            <tbody id="accountingList"></tbody>
        </table>
    </div>

    <div class="form-card">
        <h2>Báo Cáo Tài Khoản</h2>
        <div class="form-row">
            <div class="form-group">
                <label>Chọn Tài Khoản</label>
                <select id="reportAccount">
                    <option value="111">111 - Tiền mặt</option>
                    <option value="112">112 - Tiền gửi ngân hàng</option>
                    <option value="131">131 - Phải thu khách hàng</option>
                    <option value="152">152 - Nguyên vật liệu</option>
                    <option value="331">331 - Phải trả người bán</option>
                    <option value="334">334 - Phải trả người lao động</option>
                    <option value="511">511 - Doanh thu bán hàng</option>
                    <option value="622">622 - Chi phí nhân công</option>
                </select>
            </div>
            <button onclick="generateAccountReport()" class="btn-primary">Xem Báo Cáo</button>
        </div>
        <div id="accountReport" style="display: none;">
            <h3>Sổ Cái Tài Khoản <span id="reportAccountName"></span></h3>
            <div class="account-summary">
                <div class="summary-item">
                    <span>Tổng Nợ:</span>
                    <strong id="reportTotalDebit">0 đ</strong>
                </div>
                <div class="summary-item">
                    <span>Tổng Có:</span>
                    <strong id="reportTotalCredit">0 đ</strong>
                </div>
                <div class="summary-item">
                    <span>Số Dư:</span>
                    <strong id="reportBalance">0 đ</strong>
                </div>
            </div>
        </div>
    </div>
</div>
